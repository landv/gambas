<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>
Gambas Documentation - How To Package Gambas
</title>
</head>
<body>
<h1>
How To Package Gambas
</h1>
<b>NOTE:</b> The last version of this documents is 
at <a href="http://gambasdoc.org/help/howto/package">http://gambasdoc.org/help/howto/package</a>.
<p>
This file won't explain you how to make the packages, but the structure they
must follow.
<p>
Gambas <b>must</b> be packaged the way described in this document, because the
development environment relies on this structure when it creates a package
of a gambas project.
<p>
If a distribution does not follow this requirement, then the packages
generated by the development environment won't be able to be installed,
and the user will be very unhappy.
<p>
Not all distributions make correct gambas binary packages at the moment.
So, if you are a packager from these distributions, and if you read this
text, please try to help Gambas work on your distribution.
<p>
Thanks in advance,
<p>
Beno&icirc;t.
<p>
<hr>
<h2>SPECIFICATIONS FOR GAMBAS 1.0.x</h2>
<p>
Gambas binary packages must follow the following names and contents:
<p>
<h3>The runtime package</h3>
<p>
This package includes the Gambas interpreter needed to run Gambas
applications.
<p>
It contains:
<ul>
<li>The interpreter: <tt>gbx</tt>.
<li>The informer: <tt>gbi</tt>.
<li>The internal component description: <tt>lib.gb.component</tt>, <tt>gb.info</tt> and <tt>gb.list</tt>.
<li>The readme files, <tt>TODO</tt> files, and so on.
<p>
</ul>

Its name must be <u><tt>gambas-runtime</tt></u>.
<p>
<h3>The component packages</h3>
<p>
Each
&nbsp;component must have its own package.
<p>
The package of a component contains:
<ul>
<li>The shared library files: <tt>*.so</tt>, <tt>*.la</tt>.
<li>The component file: <tt>*.component</tt>.
<li>The information file: <tt>*.info</tt> and <tt>*.list</tt>.
<p>
</ul>

The name of a component package <b>MUST BE</b> <u><tt>gambas-gb-XXX</tt></u> where <tt>gb-XXX</tt> is
the name of the component, where the point were replaced by a minus sign.
<p>
For example, the <tt>gb.qt.ext</tt> component package name is <tt>gambas-gb-qt-ext</tt>.
<p>
<hr>
<h2>SPECIFICATIONS FOR GAMBAS 1.9.x</h2>
<p>
<b>WARNING:</b> These specifications can change before the release of the final version.
<p>
At the moment, the specifications are almost the same, except that
<tt>lib.XXX.component</tt> files were renamed as <tt>XXX.component</tt>, and that now
a component can have a part written in Gambas.
<p>
Gambas binary packages must follow the following name and contents:
<p>
<h3>The runtime package</h3>
<p>
This package includes the Gambas interpreter needed to run Gambas
applications.
<p>
It contains:
<ul>
<li>The interpreter: <tt>gbx2</tt>.
<li>The symbolic link <tt>gbr2</tt>.
<li>The internal component description: <tt>gb.component</tt>, <tt>gb.info</tt> and <tt>gb.list</tt>.
<li>The readme files, <tt>TODO</tt> files, and so on.
<li>The <tt>gb.debug</tt> component: <tt>gb.debug.info</tt>, <tt>gb.debug.list</tt>, <tt>gb.debug.component</tt>, <tt>gb.debug.so.*</tt>, <tt>gb.debug.la</tt>.
<li>The <tt>gb.eval</tt> component: <tt>gb.eval.info</tt>, <tt>gb.eval.list</tt>, <tt>gb.eval.component</tt>, <tt>gb.eval.so.*</tt>, <tt>gb.eval.la</tt>.
<p>
</ul>

Note that <tt>gb.la</tt>, <tt>gb.so</tt>, <tt>gb.so.0</tt> and <tt>gb.so.0.0.0</tt>
do not need to be distributed. They are temporary files used for generating
<tt>gb.info</tt> and <tt>gb.list</tt> only.
<p>
Its name must be <u><tt>gambas2-runtime</tt></u>.
<p>
<h3>The development package</h3>
<p>
This package includes all tools needed to compile Gambas projects without
having to install the complete development environment.
<p>
It contains:
<ul>
<li>The compiler: <tt>gbc2</tt>.
<li>The archiver: <tt>gba2</tt>.
<li>The informer: <tt>gbi2</tt>.
<p>
</ul>

Its name must be <u><tt>gambas2-devel</tt></u>.
<p>
<h3>The component packages</h3>
<p>
Each gambas component must have its own package.
<p>
The package of a component contains:
<p>
<ul>
<li>The shared library files: <tt>gb.XXX.la</tt>, <tt>gb.XXX.so</tt>, <tt>gb.XXX.so.0</tt>, <tt>gb.XXX.so.0.0.0</tt>.
<li>The component file: <tt>gb.XXX.component</tt>.
<li>The information file: <tt>gb.XXX.info</tt> and <tt>gb.XXX.list</tt>.
<li>Sometimes a part written in Gambas: <tt>gb.XXX.gambas</tt>.
<p>
</ul>

...where <tt>gb.XXX</tt> is the name of the component
<p>
Then name of a component package <b>MUST BE</b> <u><tt>gambas2-gb-XXX</tt></u> where <tt>gb-XXX</tt> is
the name of the component, the point being replaced by a minus sign.
<p>
For example, the <tt>gb.qt</tt> component package name is <tt>gambas2-gb-qt</tt>.
It must include:
<ul>
<li><tt>gb.qt.la</tt>
<li><tt>gb.qt.so</tt>
<li><tt>gb.qt.so.0</tt>
<li><tt>gb.qt.so.0.0.0</tt>
<li><tt>gb.qt.component</tt>
<li><tt>gb.qt.gambas</tt>
<li><tt>gb.qt.info</tt>
<li><tt>gb.qt.list</tt>
<p>
</ul>

Some component are entirely written in Gambas, i.e. they have only a Gambas part.
These components are located in the <tt>comp</tt> directory of the source archive.
<p>
You must follow the previous rules for these components, except that there is no
shared library files inside.
<p>
Note that <tt>gb.debug</tt> and <tt>gb.eval</tt> do not have their own package, as they are distributed with
the <tt>gambas2-runtime</tt> package.
<p>
<h3>The development environment package</h3>
<p>
This package includes the complete Gambas Development Environment, with the
database manager, the help files, and all components.
<p>
It contains:
<ul>
<li>The database manager: <tt>gambas-database-manager</tt>.
<li>The examples.
<li>The help files.
<p>
</ul>

It depends on the following Gambas packages:
<ul>
<li><tt>gambas2-runtime</tt>.
<li><tt>gambas2-devel</tt>.
<li>The components packages needed by the IDE and the database manager.
<p>
</ul>

Its name must be <u><tt>gambas2-ide</tt></u>.
<p>
<b>WARNING!</b>
<p>
The IDE relies on the following external tools:
<ul>
<li>The GNU translation tools for translating a project.
<li>The RPM tools for creatings RPM packages.
<p>
</ul>

So you must add the dependencies on the packages that provide these tools. The name of these
packages depends on the distribution.
<p>
For example, on Mandriva, they are:
<ul>
<li><u><tt>gettext</tt></u>
<li><u><tt>rpm-build</tt></u>
</ul>

</body>
</html>

